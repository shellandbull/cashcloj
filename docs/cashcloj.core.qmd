
---
format:
  html: {toc: true, toc-depth: 4, theme: cosmo, output-file: cashcloj.core.html}
fontsize: 0.9em
code-block-background: true
include-in-header: {text: '<link rel = "icon" href = "data:," />'}

---
<style></style><style>.printedClojure .sourceCode {
  background-color: transparent;
  border-style: none;
}
</style><style>.clay-limit-image-width .clay-image {max-width: 100%}
</style>
<script src="cashcloj.core_files/md-default0.js" type="text/javascript"></script><script src="cashcloj.core_files/md-default1.js" type="text/javascript"></script>

::: {.sourceClojure}
```clojure
(ns cashcloj.core
  (:require [scicloj.clay.v2.api :as clay]
            [clojure.string :as str]
            [tablecloth.api :as tc]
            [tablecloth.column.api :as tcc]
            [cashcloj.utils :as util]
            [scicloj.clay.v2.api :as clay]
            [scicloj.noj.v1.vis.hanami :as hanami]
            [tech.v3.dataset.math :as math]
            [scicloj.kindly.v4.kind :as kind]
            [aerial.hanami.templates :as ht]))
```
:::



::: {.sourceClojure}
```clojure
(def btc-usd
  (-> "data/instruments/BTC-USD.csv"
    (tc/dataset {:key-fn (comp keyword util/to-kebab-case)})
    (util/add-pct-change)
    (util/add-highly-volatile)))
```
:::



::: {.sourceClojure}
```clojure
(-> btc-usd
  (tc/separate-column :date [:day :month :year] (fn [date] [(.getDayOfMonth date) (.getMonth date) (.getYear date)]))
  (math/correlation-table) (get :highly-volatile))
```
:::



::: {.printedClojure}
```clojure
[[:highly-volatile 1.0] [:volume 0.42316347179312186] [:pct-change 0.1564811977950932] [:high 0.13421352127148156] [:close 0.1203641675668868] [:adj-close 0.1203641675668868] [:year 0.11169572016826253] [:open 0.11055815795644011] [:low 0.09117704753518348] [:day -0.03798082508619887]]

```
:::



::: {.sourceClojure}
```clojure
(-> btc-usd
    (tc/head 10))
```
:::


::: {.clay-dataset}
data/instruments/BTC-USD.csv [10 9]:

|      :date |     :adj-close |         :close |          :high |           :low |          :open |     :volume | :pct-change | :highly-volatile |
|------------|---------------:|---------------:|---------------:|---------------:|---------------:|------------:|------------:|-----------------:|
| 2023-07-14 | 30334.06835938 | 30334.06835938 | 31582.25390625 | 29966.38671875 | 31474.72070312 | 20917902660 | -3.62402690 |                0 |
| 2023-07-15 | 30295.80664062 | 30295.80664062 | 30407.78125000 | 30263.46289062 | 30331.78320312 |  8011667756 | -0.11861011 |                0 |
| 2023-07-16 | 30249.13281250 | 30249.13281250 | 30437.56054688 | 30089.66992188 | 30297.47265625 |  8516564470 | -0.15955075 |                0 |
| 2023-07-17 | 30145.88867188 | 30145.88867188 | 30336.40039062 | 29685.78320312 | 30249.62695312 | 13240156074 | -0.34294070 |                0 |
| 2023-07-18 | 29856.56250000 | 29856.56250000 | 30233.65625000 | 29556.42773438 | 30147.07031250 | 13138897269 | -0.96363530 |                0 |
| 2023-07-19 | 29913.92382812 | 29913.92382812 | 30184.18164062 | 29794.26953125 | 29862.04687500 | 12128602812 |  0.17372203 |                0 |
| 2023-07-20 | 29792.01562500 | 29792.01562500 | 30195.53125000 | 29638.09570312 | 29915.25000000 | 14655207121 | -0.41194499 |                0 |
| 2023-07-21 | 29908.74414062 | 29908.74414062 | 30045.99804688 | 29733.85156250 | 29805.11132812 | 10972789818 |  0.34770148 |                0 |
| 2023-07-22 | 29771.80273438 | 29771.80273438 | 29991.61523438 | 29664.12109375 | 29908.69726562 |  7873300598 | -0.45770810 |                0 |
| 2023-07-23 | 30084.53906250 | 30084.53906250 | 30330.64062500 | 29741.52734375 | 29790.11132812 |  9220145050 |  0.98834050 |                0 |


:::



```{=html}
<div style="background-color:grey;height:2px;width:100%;"></div>
```



```{=html}
<div><pre><small><small>source: src/cashcloj/bitcoin.clj</small></small></pre></div>
```
